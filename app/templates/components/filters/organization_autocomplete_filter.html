{% macro render_organization_autocomplete_filter(selected_organization, org_slug, suggested_organizations) %}
<div class="usa-accordion usa-accordion--bordered margin-bottom-2">
    <h3 class="usa-accordion__heading">
        <button type="button" class="usa-accordion__button" aria-expanded="true" aria-controls="filter-organization-autocomplete">
            Organization
        </button>
    </h3>
    <div id="filter-organization-autocomplete" class="usa-accordion__content usa-prose">
        <div class="keyword-autocomplete">
            <label class="usa-label" for="organization-input">
                Filter by organization <br>
                <span class="usa-hint">Start typing to select an organization</span>
            </label>
            <input
                type="text"
                id="organization-input"
                class="keyword-autocomplete__input usa-input"
                placeholder="Type an organization name..."
                autocomplete="off"
                aria-autocomplete="list"
                aria-controls="organization-suggestions"
                aria-expanded="false"
            >
            <div id="organization-suggestions" class="keyword-suggestions" role="listbox"></div>

            <div
                id="organization-chips"
                class="keyword-chips"
                role="list"
                aria-label="Selected organization"
                data-initial-org-id="{{ (selected_organization.id if selected_organization else '') | e }}"
                data-initial-org-name="{{ (selected_organization.name if selected_organization else '') | e }}"
                data-initial-org-slug="{{ (selected_organization.slug if selected_organization else '') | e }}"
            ></div>

            {% if suggested_organizations and not org_slug %}
            <div id="suggested-organizations" class="suggested-keywords margin-top-2">
                <p class="text-base-dark margin-bottom-1"><strong>Popular organizations:</strong></p>
                <div class="suggested-keywords__list">
                    {% for organization in suggested_organizations %}
                    <button
                        type="button"
                        class="tag-link tag-link--suggested tag-link--organization"
                        data-org-id="{{ organization.id | e }}"
                        data-org-name="{{ organization.name | e }}"
                        data-org-slug="{{ organization.slug | e }}"
                    >
                        {{ organization.name }}
                    </button>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endmacro %}
