{# templates/components/dataset_results.html #}
{% import 'components/dataset_card.j2' as dataset_card -%}
{% if datasets %}
  {% for dataset in datasets %}
    {{ dataset_card.dataset_card(dataset) }}
  {% endfor %}
    {% if after %}
    <div id="replaceMe">
    {% set new_results = results_hint + per_page %}
    <button class="usa-button"
        hx-get="{{ url_for('main.search', 
            q=query, 
            per_page=per_page, 
            after=after, 
            results=new_results,
            sort=sort_by,
            org_id=org_id,
            org_type=org_types,
            keyword=keywords,
            spatial_filter=spatial_filter
        ) }}"
        hx-target="#replaceMe"
        hx-swap="outerHTML"
        hx-push-url="{{ url_for('main.index', 
            q=query, 
            results=new_results,
            sort=sort_by,
            org_id=org_id,
            org_type=org_types,
            keyword=keywords,
            spatial_filter=spatial_filter
        ) }}"
        hx-trigger="click">
        Show more results
    </button>
    <button class="usa-button usa-button--outline" onClick="window.scrollTo({top: 0, behavior: 'smooth'});">Return to top</button> 
    </div>
    {% endif %}
{% endif %}