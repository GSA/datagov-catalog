{# templates/components/dataset_results.html #}
{% import 'components/dataset_card.j2' as dataset_card -%}

{% if datasets %}
  {% for dataset in datasets %}
    {% if from_hint %}
      {{ dataset_card.dataset_card(dataset, from_hint) }}
    {% else %}
      {{ dataset_card.dataset_card(dataset, from_hint) }}
    {% endif %}
  {% endfor %}
    {% if after %}
    <div id="replaceMe">
    {% set new_results = results_hint + per_page %}
    <button class="usa-button margin-top-2"
        hx-get="{{ url_for('main.search', q=query, per_page=per_page, after=after, results=new_results, sort=sort_by) }}"
        hx-target="#replaceMe"
        hx-swap="outerHTML"
        hx-push-url="{{ url_for('main.index', q=query, results=new_results) }}"
        hx-trigger="click">
      Show more results
    </button>
    <button class="usa-button usa-button--outline" onClick="window.scrollTo({top: 0, behavior: 'smooth'});">Return to top</button> 
    </div>
    {% endif %}
{% endif %}
